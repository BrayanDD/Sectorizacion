<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EAAAP</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body>
   
        <div class="header">
            
            <h1>EAAAP</h1>
            <p>Empresa de Acueducto, Aseo y Alcantarillado de Puerto AsÃ­s</p>
        </div>
        <div id="bombeo-banner" class="bombeo-banner" role="status" aria-live="polite"></div>
        <nav class="nav-atajos container">
            <a class="atajo" href="#sectores">
                <span class="icon">ðŸŒŠ</span> Sectores
            </a>
            <a class="atajo" href="#horario">
                <span class="icon">ðŸ•’</span> Horario
            </a>
        </nav>

               <!-- <section class="nav-olas">
  <div class="olas-top">
    <svg viewBox="0 0 500 40" preserveAspectRatio="none" aria-hidden="true">
      <path d="M0,25 C150,50 350,0 500,25 L500,40 L0,40 Z" fill="#00AEEF"></path>
    </svg>
  </div>

  <div class="container nav-olas-inner">
    <a class="chip" href="#sectores">Sectores</a>
    <a class="chip" href="#horario">Horario</a>
  </div>
</section> -->

            <div id="sectores" class="titulo-seccion">
                <h2>SECTORES</h2>
                <div class="wave">
                    <svg viewBox="0 0 500 50" preserveAspectRatio="none">
                    <path d="M0,30 C150,60 350,0 500,30 L500,00 L0,0 Z" style="fill:#00AEEF;"></path>
                    </svg>
                </div>
            </div>

            <div class="container my-4">
                <div class="row g-3">
                    <div class="col-12 col-md-6">
                    <img src="img/sector-1.png" alt="Sector 1" class="img-fluid rounded">
                    </div>
                    <div class="col-12 col-md-6">
                    <img src="img/sector-2.png" alt="Sector 2" class="img-fluid rounded">
                    </div>
                    <div class="col-12 col-md-6">
                    <img src="img/sector-3.png" alt="Sector 3" class="img-fluid rounded">
                    </div>
                    <div class="col-12 col-md-6">
                    <img src="img/sector-4.png" alt="Sector 4" class="img-fluid rounded">
                    </div>
                </div>
            </div>
            <div id="horario" class="titulo-seccion">
            <h2>HORARIO</h2>
            <div class="wave">
                <svg viewBox="0 0 500 50" preserveAspectRatio="none">
                <path d="M0,30 C150,60 350,0 500,30 L500,00 L0,0 Z" style="fill:#00AEEF;"></path>
                </svg>
            </div>
            </div>
            <div class="container my-4 text-center">
                <img src="img/horario.jpeg" alt="Horario" class="img-fluid rounded">
            </div>


              <!-- <div class="titulo-seccion">
            <h2>SECTORES</h2>
            <div class="wave wave-up">
                <svg viewBox="0 0 500 50" preserveAspectRatio="none">
                <defs>
                    <linearGradient id="gradLogo" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#00A651; stop-opacity:1" />   
                    <stop offset="50%" style="stop-color:#00AEEF; stop-opacity:1" />  
                    <stop offset="100%" style="stop-color:#0066B3; stop-opacity:1" /> 
                    </linearGradient>
                </defs>
                <path d="M0,30 C150,60 350,0 500,30 L500,50 L0,50 Z" fill="url(#gradLogo)"></path>
                </svg>
            </div>
            </div>

            
            <div class="titulo-seccion">
            <h2>HORARIO</h2>
            <div class="wave wave-up">
                <svg viewBox="0 0 500 50" preserveAspectRatio="none">
                <defs>
                    <linearGradient id="gradLogo" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#00A651; stop-opacity:1" />   
                    <stop offset="50%" style="stop-color:#00AEEF; stop-opacity:1" />  
                    <stop offset="100%" style="stop-color:#0066B3; stop-opacity:1" /> 
                    </linearGradient>
                </defs>
                <path d="M0,30 C150,60 350,0 500,30 L500,50 L0,50 Z" fill="url(#gradLogo)"></path>
                </svg>
            </div>
            </div>
         -->
    
</body>
<script>
(function () {
  // Franja horaria en minutos desde medianoche (BogotÃ¡)
  const franjas = [
    { id: "manana", label: "7:00â€“9:00 a. m.", start: 7*60,  end: 9*60  },
    { id: "tarde",  label: "2:00â€“4:00 p. m.", start: 14*60, end: 16*60 },
    { id: "noche",  label: "7:00â€“9:00 p. m.", start: 19*60, end: 21*60 },
  ];

  // ðŸ‘‰ EDITA AQUÃ tu rotaciÃ³n/tabla de sectores.
  // Ejemplo: por dÃ­a de la semana (0=Domingo..6=SÃ¡bado) defines sector por franja.
  // Reemplaza "Sector 1/2/3" por tus sectores reales (EA-1, EA-2, PA-3, etc.)
  const sectoresPorDia = {
    0: { manana: "Sector 1", tarde: "Sector 2", noche: "Sector 3" }, // Domingo
    1: { manana: "Sector 4", tarde: "Sector 5", noche: "Sector 6" }, // Lunes
    2: { manana: "Sector 7", tarde: "Sector 8", noche: "Sector 9" }, // Martes
    3: { manana: "Sector 10", tarde: "Sector 11", noche: "Sector 12" }, // MiÃ©rcoles
    4: { manana: "Sector 13", tarde: "Sector 14", noche: "Sector 15" }, // Jueves
    5: { manana: "Sector 16", tarde: "Sector 17", noche: "Sector 18" }, // Viernes
    6: { manana: "Sector 19", tarde: "Sector 20", noche: "Sector 21" }, // SÃ¡bado
  };

  // Obtiene hora actual en zona Bogota
  function ahoraBogota() {
    const parts = new Intl.DateTimeFormat('es-CO', {
      timeZone: 'America/Bogota',
      hour12: false,
      weekday: 'short',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit'
    }).formatToParts(new Date());

    const obj = Object.fromEntries(parts.map(p => [p.type, p.value]));
    const h = parseInt(obj.hour, 10);
    const m = parseInt(obj.minute, 10);
    const s = parseInt(obj.second, 10);
    
    const weekdayShort = obj.weekday.toLowerCase();
    const mapDia = { "dom":0, "lun":1, "mar":2, "miÃ©":3, "mie":3, "jue":4, "vie":5, "sÃ¡b":6, "sab":6 };
    const dia = mapDia[weekdayShort] ?? new Date().getDay(); 
    return { horas: h, minutos: m, segundos: s, minutosDesdeMedianoche: h*60+m, dia };
  }

  function franjaActual(mins) {
    return franjas.find(f => mins >= f.start && mins < f.end) || null;
  }

  function proximaFranja(mins) {
    // hoy
    const hoy = franjas.find(f => mins < f.start);
    if (hoy) return { ...hoy, cuando: "hoy" };
    // maÃ±ana (la primera franja del arreglo)
    return { ...franjas[0], cuando: "maÃ±ana" };
  }

  function render() {
    const banner = document.getElementById('bombeo-banner');
    if (!banner) return;

    const { minutosDesdeMedianoche, dia } = ahoraBogota();
    const actual = franjaActual(minutosDesdeMedianoche);
    banner.innerHTML = ""; 

    const dot = document.createElement('span');
    dot.className = 'dot';

    const texto = document.createElement('div');

    if (actual) {
      const sector = (sectoresPorDia[dia] && sectoresPorDia[dia][actual.id]) || "Sector (definir)";
      banner.className = "bombeo-banner active";
      texto.textContent = `Se iniciÃ³ el bombeo â€” ${actual.label}. Sector: ${sector}.`;
    } else {
      const prox = proximaFranja(minutosDesdeMedianoche);
      const sectorProx = (sectoresPorDia[dia] && sectoresPorDia[dia][prox.id]) || "Sector (definir)";
      banner.className = "bombeo-banner inactive";
      texto.textContent = `No hay bombeo en este momento. PrÃ³xima franja ${prox.cuando}: ${prox.label} (Sector: ${sectorProx}).`;
    }

    banner.appendChild(dot);
    banner.appendChild(texto);
  }

  render();
  // Actualiza cada minuto para reflejar cambios de franja
  setInterval(render, 60 * 1000);
})();
</script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK" crossorigin="anonymous"></script>
</html>